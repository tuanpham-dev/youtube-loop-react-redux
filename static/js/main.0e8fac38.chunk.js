(this["webpackJsonpyoutube-loop-react-redux"]=this["webpackJsonpyoutube-loop-react-redux"]||[]).push([[0],{151:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(6),r=n.n(i),c=n(17),u=n(5),l=n(33),d=n(75),s=n(23),v={videos:[],playingVideo:{id:null}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload,a=null;switch(n){case"ADD_VIDEO_BY_YOUTUBE_ID":var i=Math.max.apply(Math,Object(s.a)(e.videos.map((function(e){return e.id}))).concat([0])),r={id:i+1,youtubeId:o.youtubeId,volume:null,range:[null,null]};return Object(u.a)({},e,{videos:[].concat(Object(s.a)(e.videos),[r])});case"ADD_VIDEO":return Object(u.a)({},e,{videos:[].concat(Object(s.a)(e.videos),[o.video])});case"PLAY_VIDEO":return e.playingVideo.videoId!==o.videoId?Object(u.a)({},e,{playingVideo:{id:o.videoId}}):e;case"PLAY_FIRST_VIDEO":return e.videos.length>0?Object(u.a)({},e,{playingVideo:{id:e.videos[0].id}}):e;case"PLAY_NEXT_VIDEO":var c;return c=(a=e.videos.findIndex((function(t){return t.id===e.playingVideo.id})))===e.videos.length-1?0:a+1,Object(u.a)({},e,{playingVideo:{id:e.videos[c].id}});case"PLAY_PREVIOUS_VIDEO":var l;return l=0===(a=e.videos.findIndex((function(t){return t.id===e.playingVideo.id})))?e.videos.length-1:a-1,Object(u.a)({},e,{playingVideo:{id:e.videos[l].id}});case"UPDATE_VIDEOS":return Object(u.a)({},e,{videos:Object(s.a)(o.videos)});case"REMOVE_VIDEO":var d=null;if(null!==(a=e.videos.findIndex((function(e){return e.id===o.videoId})))){e.playingVideo.id===o.videoId&&(d=e.videos.length<=1?{id:null}:{id:e.videos[0===a?e.videos.length-1:a-1].id});var m=Object(s.a)(e.videos);return m.splice(a,1),null!==d?Object(u.a)({},e,{videos:m,playingVideo:d}):Object(u.a)({},e,{videos:m})}return e;case"EDIT_VIDEO":if(null!==(a=e.videos.findIndex((function(e){return e.id===o.video.id})))){var f=Object(s.a)(e.videos);return f.splice(a,1,o.video),Object(u.a)({},e,{videos:f})}return e;default:return e}},f=n(76),p=n.n(f),E={videos:[],playingVideo:{id:null}},y=(n(90),n(18)),g=(n(91),n(92),function(e){var t=e.className,n=e.color,o=e.onClick,i=e.children,r=t+" button";return n&&(r+=" button--".concat(n)),a.a.createElement("button",{className:r,onClick:o},i)}),b=function(e){var t=e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/);return void 0!==t[2]?t[2].split(/[^0-9a-z_-]/i)[0]:e},O=Object(c.b)((function(e){return{videos:e.videos,playingVideo:e.playingVideo}}),(function(e){return{onAddButtonClick:function(t){e({type:"ADD_VIDEO_BY_YOUTUBE_ID",payload:{youtubeId:b(t)}})},onPlayButtonClick:function(){e({type:"PLAY_FIRST_VIDEO"})},onStopButtonClick:function(){e({type:"PLAY_VIDEO",payload:{videoId:null}})},onNextButtonClick:function(){e({type:"PLAY_NEXT_VIDEO"})},onPreviousButtonClick:function(){e({type:"PLAY_PREVIOUS_VIDEO"})}}}))((function(e){var t=e.videos,n=e.playingVideo,i=e.onAddButtonClick,r=e.onPlayButtonClick,c=e.onStopButtonClick,u=e.onNextButtonClick,l=e.onPreviousButtonClick,d=Object(o.useState)(""),s=Object(y.a)(d,2),v=s[0],m=s[1],f=t.length,p=null!==n.id,E=p&&f>1;return a.a.createElement("header",{className:"header"},a.a.createElement("div",{className:"container"},a.a.createElement("a",{href:"/",className:"header__logo"},"YouTube Loop"),f>0&&a.a.createElement("div",{className:"header__controls"},p?a.a.createElement(g,{onClick:c},"Stop"):a.a.createElement(g,{onClick:r},"Play"),E&&a.a.createElement(a.a.Fragment,null,a.a.createElement(g,{onClick:l},"Previous"),a.a.createElement(g,{onClick:u},"Next"))),a.a.createElement("div",{className:"header__input-group"},a.a.createElement("input",{type:"text",className:"header__input",placeholder:"Enter YouTube URL or Video ID",value:v,onChange:function(e){return m(e.target.value)}}),a.a.createElement("div",{className:"header__input-group-append"},a.a.createElement(g,{color:"blue",onClick:function(){return i(v)}},"Go Loop!")))))})),V=(n(93),n(80));n(94);var _=null;function I(){return _||(_=new Promise((function(e){if("object"!==typeof window.YT||"function"!==typeof window.YT.ready){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),window.onYouTubeIframeAPIReady=function(){e(window.YT)}}else window.YT.ready((function(){e(window.YT)}))}))),_}var h=function(e){var t=e.youtubeId,n=e.onReady,i=e.onPlaying,r=e.onPaused,c=e.onEnded,u=e.onError,l=Object(o.useRef)(null);return Object(o.useEffect)((function(){I().then((function(e){if(l.current)var o=new e.Player(l.current,{videoId:t,events:{onReady:function(){return n(o)},onError:u,onStateChange:function(t){t.data===e.PlayerState.PLAYING?i():t.data===e.PlayerState.PAUSED?r():t.data===e.PlayerState.ENDED&&c()}}})}))})),a.a.createElement("div",{ref:l})};function j(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),o=e-3600*t-60*n;return t>0?"".concat(t,":").concat(n.toString().padStart(2,"0"),":").concat(o.toString().padStart(2,"0")):"".concat(n,":").concat(o.toString().padStart(2,0))}var D=n(60),N=(n(150),Object(c.b)((function(e){return{videos:e.videos,playingVideo:e.playingVideo}}),(function(e){return{removeVideo:function(t){e(function(e){return{type:"REMOVE_VIDEO",payload:{videoId:e}}}(t))},editVideo:function(t){e(function(e){return{type:"EDIT_VIDEO",payload:{video:e}}}(t))},playVideo:function(t){e(function(e){return{type:"PLAY_VIDEO",payload:{videoId:e}}}(t))},playNextVideo:function(){e({type:"PLAY_NEXT_VIDEO"})}}}))((function(e){var t=e.video,n=e.videos,i=e.playingVideo,r=e.removeVideo,c=e.editVideo,l=e.playVideo,d=e.playNextVideo,s=Object(o.useState)(null),v=Object(y.a)(s,2),m=v[0],f=v[1],p=Object(o.useState)(!1),E=Object(y.a)(p,2),b=E[0],O=E[1],V=Object(o.useState)(0),_=Object(y.a)(V,2),I=_[0],N=_[1],P=Object(o.useState)(""),S=Object(y.a)(P,2),T=S[0],k=S[1],w=Object(o.useState)(!1),Y=Object(y.a)(w,2),C=Y[0],R=Y[1],A=n.length>1,x=i.id===t.id,B="video"+(x?" video--active":""),L=Object(o.useRef)(null),U=function(e){m&&m.setVolume(e),c(Object(u.a)({},t,{volume:e}))},M=function(){d(),R(!0)},F=function(){if(m){var e=m.getCurrentTime(),n=m.getPlayerState(),o=m.getVolume();o!==t.volume&&U(o),1===n&&e>t.range[1]&&M()}};return Object(o.useEffect)((function(){var e=setInterval(F,500);return function(){return clearInterval(e)}})),Object(o.useEffect)((function(){return R(!0),function(){return R(!1)}}),[x]),Object(o.useEffect)((function(){m&&C&&(R(!1),x?(m.setVolume(t.volume),m.seekTo(t.range[0],!0),m.playVideo(),document.title=T+" YouTube Loop in React Redux",L.current.scrollIntoView({behavior:"smooth",block:"center"})):(m.pauseVideo(),document.title="YouTube Loop in React Redux"))}),[m,x,T,C,t.volume,t.range]),a.a.createElement("div",{ref:L,className:B},a.a.createElement("div",{className:"video__player"},a.a.createElement(h,{youtubeId:t.youtubeId,onReady:function(e){var n=e.getDuration();O(!1),n?(f(e),N(n),k(e.getVideoData().title),null!==t.volume&&null!==t.range[0]&&null!==t.range[1]||c(Object(u.a)({},t,{volume:e.getVolume(),range:[0,n]})),x&&(e.setVolume(t.volume),e.seekTo(t.range[0],!0),e.playVideo(),document.title=T+" YouTube Loop in React Redux")):r(t.id),O(!0)},onPlaying:function(){x||l(t.id)},onPaused:function(){},onEnded:M,onError:function(){r(t)}})),b&&a.a.createElement(a.a.Fragment,null,a.a.createElement(D.b,{className:"video__volume-slider",vertical:"true",value:t.volume,onChange:U}),a.a.createElement(D.a,{className:"video__range-slider",max:I,value:t.range,onChange:function(e){if(x&&m){var n=m.getCurrentTime();e[0]>n&&m.seekTo(e[0])}c(Object(u.a)({},t,{range:e}))}}),a.a.createElement("div",{className:"video__info"},"Volume: ".concat(t.volume," \u2014 Range: ").concat(j(t.range[0])," \u2192 ").concat(j(t.range[1])))),a.a.createElement("div",{className:"video__buttons"},A&&a.a.createElement(g,{className:"video__move-handle"},"Move"),a.a.createElement(g,{color:"red",onClick:function(){return r(t.id)}},"Remove Video")))}))),P=Object(c.b)((function(e){return{videos:e.videos}}),(function(e){return{updateVideos:function(t){e(function(e){return{type:"UPDATE_VIDEOS",payload:{videos:e}}}(t))}}}))((function(e){var t=e.videos,n=e.updateVideos;return t.length?a.a.createElement(V.a,{tag:"ul",list:t,setList:n,handle:".video__move-handle",className:"video-list"},t.map((function(e){return a.a.createElement("li",{key:e.id,className:"video-item"},a.a.createElement(N,{video:e}))}))):null})),S=function(e){e.children;return a.a.createElement("div",{className:"main"},a.a.createElement("div",{className:"container"},a.a.createElement(P,null)))},T=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(O,null),a.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var k=function(e){if(void 0===e){var t=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}();e=Object(u.a)({},E,{},t)}var n=Object(l.c)(m,e,Object(l.a)(d.a));return n.subscribe(p()((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){}}(n.getState())}),1e3)),n}();r.a.render(a.a.createElement(c.a,{store:k},a.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,n){e.exports=n(151)},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){}},[[81,1,2]]]);
//# sourceMappingURL=main.0e8fac38.chunk.js.map